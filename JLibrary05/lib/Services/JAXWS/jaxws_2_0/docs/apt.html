<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=us-ascii">
  <title>JAX-WS 2.0 ea3 -- APT</title>
  <meta name="CREATED" content="20050329;10375410">
  <meta name="CHANGED" content="20050401;8213207">
  <link rel="stylesheet" type="text/css" href="style/default.css"/>
</head>
<body dir="ltr" lang="en-US">
<center>
<h1><a class="mozTocH1" name="mozTocId872588"></a>
  Java<sup><font size="-2">TM</font></sup> API for XML Web Services<br />
      APT
</h1>
   <b>Specification Version:</b> 2.0<br />
   <b>Reference Implementation (RI) Version:</b> 2.0 ea3<br />
  </center>

<hr>
<p>Last Modified: 12/14/05</p>
<br>
<p></p>
<h1><a class="mozTocH1" name="mozTocId642262"></a><code>apt<br>
</code></h1>
<p>The <code>apt</code> tool provides a facility for programmatically
processing the annotations added to Java by <a
 href="http://www.jcp.org/en/jsr/detail?id=175">JSR 175</a>, <i>Metadata
Facility for the Java</i><font size="2"><sup>TM</sup></font><i>Programming
Language</i>. In brief, JSR 175 allows programmers to declare new kinds
of structured modifiers that can be associated with program elements,
fields, methods, classes, etc.</p>
<p>The <code>apt</code> tool generates the portable artifacts used in
JAX-WS services. <br>
</p>
<h3><a class="mozTocH3" name="mozTocId798307"></a>Command-line<br>
</h3>
<h3><a class="mozTocH3" name="mozTocId408933"></a>Syntax</h3>
<pre>apt &lt;apt and javac options&gt; &lt;source files&gt;<br></pre>
<p>The following table lists the <code>apt</code> options.</p>
<p align="center">Table 1-1 apt Options</p>
<table border="1" cellpadding="2" cellspacing="3" width="847">
  <col width="220"> <col width="608"> <tbody>
    <tr>
      <th width="220">
      <p align="center">Option</p>
      </th>
      <th width="608">
      <p align="center">Description</p>
      </th>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-classpath &lt;path&gt;</code></p>
      </td>
      <td width="608">
      <p align="left">Specifies where to find user class files and
annotation processor factories</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-cp &lt;path&gt;</code></p>
      </td>
      <td width="608">
      <p align="left">Same as <code>-classpath &lt;path&gt;</code></p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-d &lt;path&gt;</code></p>
      </td>
      <td width="608">
      <p align="left">Specifies where to place processor and <code>javac</code>
generated class files</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p><code>-s &lt;path&gt;</code></p>
      </td>
      <td width="608">
      <p>Specifies where to place processor generated source files</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-source &lt;release&gt;</code></p>
      </td>
      <td width="608">
      <p align="left">Provide source compatibility with the specified
release</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p><code>-version</code></p>
      </td>
      <td width="608">
      <p>Version information</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-help</code></p>
      </td>
      <td width="608">
      <p align="left">Print a synopsis of standard options; use <code>javac
-help</code> for more options</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-X</code></p>
      </td>
      <td width="608">
      <p align="left">Print a synopsis of non-standard options</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-J&lt;flag&gt;</code></p>
      </td>
      <td width="608">
      <p align="left">Pass &lt;flag&gt; directly to the runtime system</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-A[key[=value]]</code></p>
      </td>
      <td width="608">
      <p align="left">Options to pass to annotation processors</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>nocompile</code></p>
      </td>
      <td width="608">
      <p align="left">Do not compile source files to class files</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-print</code></p>
      </td>
      <td width="608">
      <p align="left">Print out a textual representation of the
specified types</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p><code>-factorypath &lt;path&gt;</code></p>
      </td>
      <td width="608">
      <p>Specify where to find annotation processor factories</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-factory &lt;class&gt;</code></p>
      </td>
      <td width="608">
      <p align="left">Name of <code>AnnotationProcessorFactory</code>
to use; bypasses default discovery process</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-g</code></p>
      </td>
      <td width="608">
      <p align="left">Generate all debugging info</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-g:none</code></p>
      </td>
      <td width="608">
      <p align="left">Generate no debugging info</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-g:{lines,vars,source}</code></p>
      </td>
      <td width="608">
      <p align="left">Generate only some debugging info</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-nowarn</code></p>
      </td>
      <td width="608">
      <p align="left">Generate no warnings</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-verbose</code></p>
      </td>
      <td width="608">
      <p align="left">Output messages about what <code>apt</code> and <code>javac</code>
are doing</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-deprecation</code></p>
      </td>
      <td width="608">
      <p align="left">Output source locations where deprecated APIs are
used</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-sourcepath &lt;path&gt;</code></p>
      </td>
      <td width="608">
      <p align="left">Specify where to find input source files</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-bootclasspath &lt;path&gt;</code></p>
      </td>
      <td width="608">
      <p align="left">Override location of bootstrap class files</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-endorseddirs &lt;dirs&gt;</code></p>
      </td>
      <td width="608">
      <p align="left">Override location of endorsed standards path</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-encoding &lt;encoding&gt;</code></p>
      </td>
      <td width="608">
      <p align="left">Specify character encoding used by source files</p>
      </td>
    </tr>
    <tr>
      <td width="220">
      <p align="left"><code>-target &lt;release&gt;</code></p>
      </td>
      <td width="608">
      <p align="left">Generate class files for a specific virtual
machine version</p>
      </td>
    </tr>
  </tbody>
</table>
<p>It is important when using <code>apt</code> with JAX-WSto specify
all of the JAR files in the distributed JAX-WS bundle in the classpath
passed to <code>apt</code>. The <code>-sourcepath &lt;path&gt;</code>
option must also be provided so that <code>apt</code> and the JAX-WS
annotation processor can find all types referenced by a web service
endpoint implementation class.</p>
<p>For more information on apt please refer to the <code>apt</code>
documentation <a
 href="http://java.sun.com/j2se/1.5.0/docs/guide/apt/index.html">here</a>.</p>
<h2></h2>
<h2><a name="apttask" id="apttask"></a>Ant task<br>
</h2>
<p>An Ant task for the <code>apt</code> tool is provided with JAX-WS
2.0 ea3 . The attributes and elements supported by the Ant task are
listed below:</p>
<pre>&lt;apt<br>    
  verbose="true|false"<br>    
  classpath="classpath"<br>    
  destdir="directory for generated class files"<br>    
  sourcedestdir="directory for generated source files"<br>    
  nocompile="true|false"<br>    
  print="true|false"<br>    
  factorypath="&lt;path&gt;"<br>    
  factory="name of AnnotationProcessorFactory to use"<br>    
  xlistannotationtypes="true|false"<br>    
  xlistdeclarations="true|false"<br>    
  xprintaptrounds="true|false"<br>    
  xprintfactoryinfo="true|false"<br>    
  xclassesasdecls="true|false"<br>    
  debug="true|false"<br>    
  debuglevel="lines|vars|source"<br>    
  nowarn="true|false"<br>    
  deprecation="true|false"<br>    
  bootclasspath="&lt;path&gt;"<br>    
  extdirs="&lt;path&gt;"<br>    
  endorseddirs="&lt;path&gt;"<br>    
  sourcepath="&lt;path&gt;"<br>    
  encoding="specify character encoding used by source files"<br>    
  target="generate class files for specific virtual machine version"&gt;<br>    
  &lt;option key="keyname" value="keyvalue"/&gt;
  &lt;source ... &gt; ... &lt;/source&gt;<br>    
  &lt;classpath ... &gt; ... &lt;/classpath&gt;<br>&lt;/apt&gt;<br>
</pre>
<table border="0" cellpadding="2" cellspacing="2" width="90%">
  <tbody>
    <tr>
      <td bgcolor="#ffffcc" width="20%">
      <p>Attribute</p>
      </td>
      <td bgcolor="#ffffcc" width="60%">
      <p>Description</p>
      </td>
      <td bgcolor="#ffffcc" width="20%">
      <p>Command line</p>
      </td>
    </tr>
<!--    <tr valign="top">
      <td width="15%">
      <p><code>fork</code></p>
      </td>
      <td width="70%">
      <p>Forks the <code>apt</code> process into another virtual
machine</p>
      </td>
      <td width="15%">
      <p>n/a</p>
      </td>
    </tr>-->
    <tr>
      <td width="20%">
      <p><code>verbose</code></p>
      </td>
      <td width="60%">
      <p>Output messages about what the compiler is doing</p>
      </td>
      <td width="20%">
      <p><code>-verbose</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>classpath</code></p>
      </td>
      <td width="60%">
      <p>Specify where to find user class files and annotation
processor factories</p>
      </td>
      <td width="20%">
      <p><code>-classpath</code> or <code>-cp</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>destdir</code></p>
      </td>
      <td width="60%">
      <p>Specify where to place processor and <code>javac</code>
generated class files</p>
      </td>
      <td width="20%">
      <p><code>-d &lt;path&gt;</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>sourcedestdir</code></p>
      </td>
      <td width="60%">
      <p>Specify where to place processor generated source files</p>
      </td>
      <td width="20%">
      <p><code>-s &lt;path&gt;</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>nocompile</code></p>
      </td>
      <td width="60%">
      <p>Do not compile source files to class files</p>
      </td>
      <td width="20%">
      <p><code>-nocompile</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>print</code></p>
      </td>
      <td width="60%">
      <p>Print out a textual representation of the specified types</p>
      </td>
      <td width="20%">
      <p><code>-print</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>factorypath</code></p>
      </td>
      <td width="60%">
      <p>Specify where to find annotation processor factories</p>
      </td>
      <td width="20%">
      <p><code>-factorypath &lt;path&gt;</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>factory</code></p>
      </td>
      <td width="60%">
      <p>Name of the <code>AnnotationProcessorFactory</code> to use;
bypasses default discovery process</p>
      </td>
      <td width="20%">
      <p><code>-factory &lt;class&gt;</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>xlistannotationtypes</code></p>
      </td>
      <td width="60%">
      <p>List the found annotation types</p>
      </td>
      <td width="20%">
      <p><code>-xlistannotationtypes</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>xlistdeclarations</code></p>
      </td>
      <td width="60%">
      <p>List specified and included declarations</p>
      </td>
      <td width="20%">
      <p><code>-xlistdeclarations</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>xprintaptrounds</code></p>
      </td>
      <td width="60%">
      <p>Print information about initial and recursive <code>apt</code>
rounds</p>
      </td>
      <td width="20%">
      <p><code>-xprintaptrounds</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>xprintfactoryinfo</code></p>
      </td>
      <td width="60%">
      <p>Print information about which annotations a factory is asked
to process</p>
      </td>
      <td width="20%">
      <p><code>-xprintfactoryinfo</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>xclassesasdecls</code></p>
      </td>
      <td width="60%">
      <p>Treat both class and source files as declarations to process</p>
      </td>
      <td width="20%">
      <p><code>-xclassesasdecls</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>debug</code></p>
      </td>
      <td width="60%">
      <p>Generate all debugging info</p>
      </td>
      <td width="20%">
      <p><code>-g</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>debuglevel</code></p>
      </td>
      <td width="60%">
      <p>Debug level: lines, vars, sources</p>
      </td>
      <td width="20%">
      <p><code>-g:{lines,vars,source}</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>nowarn</code></p>
      </td>
      <td width="60%">
      <p>Generate no warnings</p>
      </td>
      <td width="20%">
      <p><code>-nowarn</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>deprecation</code></p>
      </td>
      <td width="60%">
      <p>Output source locations where deprecated APIs are used</p>
      </td>
      <td width="20%">
      <p><code>-deprecation</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>bootclasspath</code></p>
      </td>
      <td width="60%">
      <p>Override location of bootstrap class files</p>
      </td>
      <td width="20%">
      <p><code>-bootclasspath &lt;path&gt;</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>extdirs</code></p>
      </td>
      <td width="60%">
      <p>Override location of installed extensions</p>
      </td>
      <td width="20%">
      <p><code>-extdirs &lt;dirs&gt;</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>endorseddirs</code></p>
      </td>
      <td width="60%">
      <p>Override location of endorsed standards path</p>
      </td>
      <td width="20%">
      <p><code>-endorseddirs &lt;dirs&gt;</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>sourcepath</code></p>
      </td>
      <td width="60%">
      <p>Specify where to find input source files</p>
      </td>
      <td width="20%">
      <p><code>-sourcepath &lt;path&gt;</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>encoding</code></p>
      </td>
      <td width="60%">
      <p>Specify character encoding used by source files</p>
      </td>
      <td width="20%">
      <p><code>-encoding &lt;encoding&gt;</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>target</code></p>
      </td>
      <td width="60%">
      <p>Generate class files for a specific virtual machine version</p>
      </td>
      <td width="20%">
      <p><code>-target &lt;release&gt;</code></p>
      </td>
    </tr>
    <tr>
      <td width="20%">
      <p><code>option</code></p>
      </td>
      <td width="60%">
      <p>Specify options to pass to annotation processors</p>
      </td>
      <td width="20%">
      <p><code>-Akey=value;</code></p>
      </td>
    </tr>

  </tbody>
</table>
<p>The list of source files to be processed are specified via a nested <code>&lt;source&gt;</code>
element. That is, a <a
 href="http://ant.apache.org/manual/using.html#path">path-like structure</a>.
The classpath attribute is a <a
 href="http://ant.apache.org/manual/using.html#path">path-like structure</a>
and can also be set via nested <code>&lt;classpath&gt;</code>
elements. Before this task can be used, a <code>&lt;taskdef&gt;</code>
element needs to be added to the project as given below:</p>
<pre>&lt;taskdef name="apt" classname="com.sun.tools.ws.ant.Apt"&gt;<br><br> &lt;classpath refid="jaxws.classpath"/&gt;<br><br>&lt;/taskdef&gt;<br></pre>
<p>where <code>jaxws.classpath</code> is a reference to a <a
 href="http://ant.apache.org/manual/using.html#path">path-like structure</a>,
defined elsewhere in the build environment, and contains the list of
classes required by the JAX-WS tools.</p>
<h3>Examples</h3>
<pre>
&lt;apt    
    destdir="${build.classes.home}"
    sourcedestdir="${build.classes.home}"
    sourcepath="${basedir}/src"&gt;
    &lt;classpath refid="jaxws.classpath"/&gt;
    &lt;source dir="${basedir}/src" includes="*.java"/&gt;
    &lt;/source&gt;
&lt;/apt&gt;<br></pre>
<p>The above example processes the Java source files in the <code>${basedir}/src</code>
directory and generates the source and class files in <code>${build.classes.home}</code>.
<code>${basedir}/src</code> is directory used to search for source
files for multiple <code>apt</code> rounds. The classpath is a
reference to a <a href="http://ant.apache.org/manual/using.html#path">path-like
structure</a> <code>jaxws.classpath</code>, defined elsewhere in the
build environment.</p>
<pre>
&lt;apt
    debug="true"
    verbose="true"
    destdir="${build.classes.home}"
    sourcedestdir="${build.classes.home}"
    sourcepath="${basedir}/src"&gt;
    &lt;classpath refid="jaxws.classpath"/&gt;
    &lt;option key="r" value="${build.home}"/&gt;
    &lt;source dir="${basedir}/src"&gt;
      &lt;include name="**/server/*.java"/&gt;
    &lt;/source&gt;
&lt;/apt&gt;<br></pre>
<p>The above example processes the Java source files in <code>${basedir}/src/**/server</code>,
generates the source and class files in <code>${build.classes.home}</code>,
compiles with debug information on, prints a message about what the
compiler is doing, and passes the <code>-Dr=${build.home}</code> 
option to the annotation processor(s). <code>${basedir}/src</code> is
the directory used to search for source files for multiple <code>apt</code>
rounds. The classpath is a reference to a <a
 href="http://ant.apache.org/manual/using.html#path">path-like structure</a>
<code>jaxws.classpath</code>, defined elsewhere in the build
environment. This will also fork off the <code>apt</code> process
using the default <code>java</code> executable.</p>
<hr>
<p><a href="../dist/docs/Copyright.html"><i><font size="2">Copyright &#169;
2005 Sun Microsystems, Inc. All rights reserved.</font></i></a></p>
</body>
</html>
